<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 400" width="900" height="400">
  <defs>
    <style>
      .title { font: bold 18px sans-serif; fill: #333; }
      .box-text { font: 12px sans-serif; fill: #333; text-anchor: middle; dominant-baseline: middle; }
      .box-text-bold { font: bold 12px sans-serif; fill: #333; text-anchor: middle; dominant-baseline: middle; }
      .annotation { font: italic 10px sans-serif; fill: #666; text-anchor: middle; }
      .note { font: 10px sans-serif; fill: #555; text-anchor: middle; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <marker id="arrowhead-down" markerWidth="7" markerHeight="10" refX="3.5" refY="9" orient="auto">
      <polygon points="0 0, 3.5 10, 7 0" fill="#666"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="400" fill="#ffffff"/>
  
  <!-- Title -->
  <text x="450" y="30" class="title" text-anchor="middle">QBIND Transaction and State Flow</text>
  
  <!-- Main Flow: Client → RPC → Mempool → Proposal → Consensus → Commit -->
  
  <!-- Client -->
  <rect x="30" y="80" width="90" height="50" rx="8" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
  <text x="75" y="105" class="box-text-bold">Client</text>
  
  <!-- Arrow: Client → RPC -->
  <line x1="120" y1="105" x2="155" y2="105" stroke="#666" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  
  <!-- RPC -->
  <rect x="160" y="80" width="90" height="50" rx="8" fill="#fff3e0" stroke="#f57c00" stroke-width="2"/>
  <text x="205" y="105" class="box-text-bold">RPC</text>
  
  <!-- Arrow: RPC → Mempool -->
  <line x1="250" y1="105" x2="285" y2="105" stroke="#666" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  
  <!-- Mempool -->
  <rect x="290" y="80" width="90" height="50" rx="8" fill="#fff9c4" stroke="#fbc02d" stroke-width="2"/>
  <text x="335" y="105" class="box-text-bold">Mempool</text>
  
  <!-- Arrow: Mempool → Proposal -->
  <line x1="380" y1="105" x2="415" y2="105" stroke="#666" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  
  <!-- Proposal -->
  <rect x="420" y="80" width="90" height="50" rx="8" fill="#e8f5e9" stroke="#388e3c" stroke-width="2"/>
  <text x="465" y="105" class="box-text-bold">Proposal</text>
  
  <!-- Arrow: Proposal → Consensus -->
  <line x1="510" y1="105" x2="545" y2="105" stroke="#666" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  
  <!-- Consensus -->
  <rect x="550" y="80" width="90" height="50" rx="8" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2"/>
  <text x="595" y="105" class="box-text-bold">Consensus</text>
  
  <!-- Arrow: Consensus → Commit -->
  <line x1="640" y1="105" x2="675" y2="105" stroke="#666" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  
  <!-- Commit -->
  <rect x="680" y="80" width="90" height="50" rx="8" fill="#c8e6c9" stroke="#2e7d32" stroke-width="2"/>
  <text x="725" y="105" class="box-text-bold">Commit</text>
  
  <!-- Vertical Flow: Commit → Execution Engine → State Update → RocksDB -->
  
  <!-- Arrow: Commit → Execution Engine -->
  <line x1="725" y1="130" x2="725" y2="165" stroke="#666" stroke-width="1.5" marker-end="url(#arrowhead-down)"/>
  
  <!-- Execution Engine -->
  <rect x="630" y="170" width="190" height="50" rx="8" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
  <text x="725" y="195" class="box-text-bold">Execution Engine</text>
  
  <!-- Arrow: Execution Engine → State Update -->
  <line x1="725" y1="220" x2="725" y2="255" stroke="#666" stroke-width="1.5" marker-end="url(#arrowhead-down)"/>
  
  <!-- State Update -->
  <rect x="655" y="260" width="140" height="50" rx="8" fill="#fff9c4" stroke="#fbc02d" stroke-width="2"/>
  <text x="725" y="285" class="box-text-bold">State Update</text>
  
  <!-- Arrow: State Update → RocksDB -->
  <line x1="725" y1="310" x2="725" y2="345" stroke="#666" stroke-width="1.5" marker-end="url(#arrowhead-down)"/>
  
  <!-- RocksDB -->
  <rect x="665" y="350" width="120" height="40" rx="8" fill="#e8eaf6" stroke="#3f51b5" stroke-width="2"/>
  <text x="725" y="370" class="box-text-bold">RocksDB</text>
  
  <!-- Annotations -->
  
  <!-- Replay protected via nonce -->
  <text x="335" y="150" class="annotation">Replay protected via nonce</text>
  <line x1="335" y1="140" x2="335" y2="132" stroke="#888" stroke-width="1" stroke-dasharray="3,2"/>
  
  <!-- Gas enforced per transaction -->
  <text x="550" y="245" class="annotation">Gas enforced per transaction</text>
  <line x1="625" y1="245" x2="640" y2="220" stroke="#888" stroke-width="1" stroke-dasharray="3,2"/>
  
  <!-- Deterministic execution required -->
  <text x="550" y="195" class="annotation">Deterministic execution required</text>
  <line x1="610" y1="195" x2="625" y2="195" stroke="#888" stroke-width="1" stroke-dasharray="3,2"/>
  
</svg>
