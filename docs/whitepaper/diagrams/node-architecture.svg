<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 450" width="850" height="450">
  <defs>
    <style>
      .title { font: bold 18px sans-serif; fill: #333; }
      .box-text { font: 12px sans-serif; fill: #333; text-anchor: middle; dominant-baseline: middle; }
      .layer-label { font: italic 10px sans-serif; fill: #666; }
    </style>
  </defs>
  
  <!-- Background -->
  <rect width="850" height="450" fill="#ffffff"/>
  
  <!-- Title -->
  <text x="425" y="30" class="title" text-anchor="middle">QBIND Node Architecture</text>
  
  <!-- RPC & CLI -->
  <rect x="350" y="50" width="150" height="40" rx="8" fill="#dae8fc" stroke="#6c8ebf" stroke-width="2"/>
  <text x="425" y="70" class="box-text">RPC &amp; CLI Configuration</text>
  
  <!-- Peer Manager -->
  <rect x="100" y="120" width="140" height="40" rx="8" fill="#d5e8d4" stroke="#82b366" stroke-width="2"/>
  <text x="170" y="140" class="box-text">Peer Manager</text>
  
  <!-- P2P Transport -->
  <rect x="610" y="120" width="140" height="40" rx="8" fill="#d5e8d4" stroke="#82b366" stroke-width="2"/>
  <text x="680" y="140" class="box-text">P2P Transport</text>
  
  <!-- Arrows from RPC to network layer -->
  <line x1="380" y1="90" x2="200" y2="120" stroke="#999" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="470" y1="90" x2="650" y2="120" stroke="#999" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  
  <!-- Secure Session Layer -->
  <rect x="100" y="190" width="650" height="50" rx="8" fill="#fff2cc" stroke="#d6b656" stroke-width="2"/>
  <text x="425" y="215" class="box-text">Secure Session Layer (KEM Handshake / AEAD Transport)</text>
  
  <!-- Arrows to secure session -->
  <line x1="170" y1="160" x2="170" y2="190" stroke="#999" stroke-width="1.5"/>
  <line x1="680" y1="160" x2="680" y2="190" stroke="#999" stroke-width="1.5"/>
  
  <!-- Mempool -->
  <rect x="100" y="270" width="160" height="50" rx="8" fill="#e1d5e7" stroke="#9673a6" stroke-width="2"/>
  <text x="180" y="295" class="box-text">Mempool (FIFO + DAG)</text>
  
  <!-- Consensus Engine -->
  <rect x="295" y="270" width="160" height="50" rx="8" fill="#f8cecc" stroke="#b85450" stroke-width="2"/>
  <text x="375" y="295" class="box-text">Consensus Engine</text>
  
  <!-- Runtime Execution -->
  <rect x="490" y="270" width="160" height="50" rx="8" fill="#ffe6cc" stroke="#d79b00" stroke-width="2"/>
  <text x="570" y="295" class="box-text">Runtime Execution</text>
  
  <!-- Arrows from secure session to components -->
  <line x1="180" y1="240" x2="180" y2="270" stroke="#999" stroke-width="1.5"/>
  <line x1="375" y1="240" x2="375" y2="270" stroke="#999" stroke-width="1.5"/>
  <line x1="570" y1="240" x2="570" y2="270" stroke="#999" stroke-width="1.5"/>
  
  <!-- Horizontal connections -->
  <line x1="260" y1="295" x2="295" y2="295" stroke="#999" stroke-width="1.5"/>
  <line x1="455" y1="295" x2="490" y2="295" stroke="#999" stroke-width="1.5"/>
  
  <!-- Persistent Storage -->
  <rect x="100" y="350" width="650" height="50" rx="8" fill="#f5f5f5" stroke="#666666" stroke-width="2"/>
  <text x="425" y="375" class="box-text">Persistent Storage (RocksDB)</text>
  
  <!-- Arrows to storage -->
  <line x1="180" y1="320" x2="180" y2="350" stroke="#999" stroke-width="1.5"/>
  <line x1="375" y1="320" x2="375" y2="350" stroke="#999" stroke-width="1.5"/>
  <line x1="570" y1="320" x2="570" y2="350" stroke="#999" stroke-width="1.5"/>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#999"/>
    </marker>
  </defs>
  
  <!-- Legend / Labels -->
  <text x="100" y="430" class="layer-label">All network traffic passes through the secure session layer. Consensus messages validated before state transition.</text>
</svg>
